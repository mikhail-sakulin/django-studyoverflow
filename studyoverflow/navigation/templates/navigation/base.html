{% load static %}
{% load navigation_tags %}


<!-- Базовый html-шаблон с header, не предназначен для использования без дочерних html-шаблонов -->
<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Блок с названием страницы -->
  {% block title %}
  {% endblock %}

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="{% static 'navigation/css/base.css' %}">

  <link type="text/css" rel="stylesheet" href="{% static 'navigation/css/messages.css' %}">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

  <!-- Блок с загрузкой дополнительных css-стилей в дочерних html-шаблонах -->
  {% block extra_css %}
  {% endblock %}
</head>

<body class="bg-black">

  <!-- header -->
  <header id="header" class="p-3 bg-black text-white">
    <div class="container">
      <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">

        <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-2 mb-lg-0 gap-1">
          <li><a id="studyoverflow-button" href="{% url 'home' %}" class="nav-link px-2 text-warning">StudyOverflow</a></li>
          {% get_menu_for_header as menu %}
          {% for element_of_menu in menu %}
            <li><a href="{% url element_of_menu.url %}"
                   class="{% if section_of_menu_selected == element_of_menu.url %}
                            nav-hover-selected
                          {% endif %}
                          nav-link nav-hover px-2 text-white">
                    {{ element_of_menu.name }}
                </a>
            </li>
          {% endfor %}
        </ul>

        <form class="col-12 col-lg-3 mb-3 mb-lg-0 me-lg-3">
          <input id="base-search" type="search" class="form-control form-control-dark" placeholder="Поиск по заголовку..." aria-label="Search">
        </form>

        <div class="text-end">
          {% if user.is_authenticated %}

            <a href="{% url 'users:profile' %}" id="profile-button" class="btn btn-warning me-2">
              <i id="profile-icon" class="bi bi-person-circle"></i>
              <span id="profile-icon-label">Профиль</span>
            </a>

            <form method="post" action="{% url 'users:logout' %}?next={{ request.path }}" class="d-inline">
                {% csrf_token %}
                 <button type="submit" class="btn btn-outline-light">
                   Выйти
                 </button>
            </form>

          {% else %}

            <a href="{% url 'users:login' %}?next={{ request.path }}" class="btn btn-outline-light me-2">Войти</a>
            <a href="{% url 'users:register' %}?next={{ request.path }}" class="btn btn-warning">Регистрация</a>

          {% endif %}
        </div>

      </div>
    </div>
  </header>

  <!-- Подключение html-шаблона для сообщений Django (messages) -->
  {% include 'navigation/messages.html' %}

  <!-- Блок с основным содержимым дочерних html-шаблонов -->
  {% block content  %}
  {% endblock %}

  <!-- Подключение JS-скрипта Bootstrap 5 -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Подключение JS-скрипта для управления отображением сообщений -->
  <script src="{% static 'navigation/js/messages.js' %}"></script>

  <!-- Блок с загрузкой дополнительных js-файлов в дочерних html-шаблонах -->
  {% block extra_js %}
  {% endblock %}

</body>
</html>
