{% extends 'base/base.html' %}
{% load static %}


{% block title %}
    <title>Посты</title>
{% endblock %}


{% block extra_css %}
  <!-- Подключение CSS-темы для подсветки синтаксиса кода -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">

  <link type="text/css" rel="stylesheet" href="{% static 'posts/css/post_base.css' %}">

  <link type="text/css" rel="stylesheet" href="{% static 'posts/css/post_card.css' %}">

  <link type="text/css" rel="stylesheet" href="{% static 'posts/css/post_list.css' %}">
{% endblock %}


{% block content %}

  <!-- Карточки с постами -->
  <main class="container px-4 px-lg-0 my-4">
    <div class="row g-4">
      {% for post in posts %}
        {% include 'posts/post_card.html' %}
      {% endfor %}
    </div>
  </main>

  <!-- Пагинация -->
  {% if page_obj.has_other_pages %}
    <nav>
      <ul class="pagination mb-4">

        <li class="page-item {% if not page_obj.has_previous %} disabled {% endif %}">
          <a class="page-link px-4" href="?page={{ 1 }}">
            Первая
          </a>
        </li>

        <li class="page-item {% if not page_obj.has_previous %} disabled {% endif %}">
          <a class="page-link" href="?page={{ page_obj.number|add:-1 }}">
            <span aria-hidden="true">«</span>
          </a>
        </li>

        {% if page_obj.number|add:-2 > 0 %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.number|add:-2 }}">{{ page_obj.number|add:-2 }}</a>
          </li>
        {% endif %}

        {% if page_obj.number|add:-1 > 0 %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.number|add:-1 }}">{{ page_obj.number|add:-1 }}</a>
          </li>
        {% endif %}

        <li class="page-item active">
          <a class="page-link" href="#">{{ page_obj.number }}</a>
        </li>

        {% if page_obj.number|add:1 <= page_obj.paginator.num_pages %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.number|add:1 }}">{{ page_obj.number|add:1 }}</a>
          </li>
        {% endif %}

        {% if page_obj.number|add:2 <= page_obj.paginator.num_pages %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.number|add:2 }}">{{ page_obj.number|add:2 }}</a>
          </li>
        {% endif %}

        <li class="page-item {% if not page_obj.has_next %} disabled {% endif %}">
          <a class="page-link" href="?page={{ page_obj.number|add:1 }}">
            <span aria-hidden="true">»</span>
          </a>
        </li>

        <li class="page-item {% if not page_obj.has_next %} disabled {% endif %}">
          <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">
            Последняя
          </a>
        </li>

      </ul>
    </nav>
  {% endif %}

{% endblock %}


{% block extra_js %}
  <!-- Подключение JS-скрипта highlight.js для подсветки синтаксиса кода -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

  <!-- Запуск highlight.js -->
  <script src="{% static 'posts/js/highlight_run.js' %}"></script>

  <!-- Подключение js-скрипта для эффекта затемнения для content, если не помещается по высоте -->
  <script src="{% static 'posts/js/overflow_gradient.js' %}"></script>
{% endblock %}